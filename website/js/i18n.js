(() => {
  const SUPPORTED = ['en', 'es', 'pt', 'zh', 'it'];

  const translations = {
    en: {
      'aria.openSidebar': 'Open sidebar menu',
      'aria.goHome': 'Go to Home',
      'aria.navigation': 'Navigation',

      'nav.login': 'Login',
      'nav.panel': 'Panel',
      'nav.logout': 'Logout',
      'nav.download': 'Download',
      'nav.gameInfo': 'Game Info',
      'nav.library': 'Library',
      'nav.community': 'Community',
      'nav.forum': 'Forum',
      'nav.support': 'Support',
      'nav.ranking': 'Ranking',
      'nav.language': 'Language',

      'footer.rights': 'All rights reserved.',

      'common.loading': 'Loading...',
      'common.here': 'here',
      'common.createdOn': 'Created on {date}',
      'common.by': 'by {name}',

      'title.home': 'Chaotic - Home',
      'home.kicker': 'MMORPG • Persistent world • Progression and challenges',
      'home.subtitle': 'Enter the world of Chaotic and follow the latest server news. Create your account, sign in and get ready for your next adventure.',
      'home.createAccount': 'Create account',
      'home.signIn': 'Sign in',
      'home.news': 'News',
      'home.news.date': 'Date',
      'home.news.title': 'Title',
      'home.news.content': 'Content',
      'home.news.loadError': 'Failed to load news.',

      'title.login': 'Login - Chaotic',
      'login.header': 'Login',
      'login.username': 'Username',
      'login.password': 'Password',
      'login.submit': 'Sign in',
      'login.createAccount': 'Create account',
      'login.invalid': 'Invalid username or password.',
      'login.serverError': 'Could not connect to the server.',

      'title.register': 'Create Account - Chaotic',
      'register.header': 'Create Account',
      'register.username': 'Username',
      'register.password': 'Password',
      'register.email': 'Email',
      'register.submit': 'Register',
      'register.error': 'Failed to create account.',
      'register.serverError': 'Could not connect to the server.',

      'title.player': 'Player Panel - Chaotic',
      'player.header': 'Account Management',
      'player.welcome': 'Welcome to your account {name}!',
      'player.accountStatus': 'Account Status',
      'player.manageAccount': 'Manage Account',
      'player.logout': 'Logout',
      'player.downloadClient': 'Download Client',
      'player.downloadText': 'Click {here} to download the latest Chaotic client!',
      'player.characters': 'Characters',
      'player.table.name': 'Name',
      'player.table.voc': 'Voc/Level/World',
      'player.table.status': 'Status',
      'player.table.actions': 'Actions',
      'player.premium': 'Premium Account',
      'player.free': 'Free Account',
      'player.premiumBalance': 'Balance of Premium Time: {days} days',
      'player.row.vocLevelWorld': '{voc} - Level {level} - On {world}',
      'player.action.edit': 'Edit',
      'player.action.delete': 'Delete',
      'player.noCharacters': 'No characters found.',
      'player.confirmDelete': 'Are you sure you want to delete this character?',
      'player.deleteError': 'Failed to delete.',
      'player.renamePrompt': 'New character name:',
      'player.renameError': 'Failed to rename.',

      'title.ranking': 'Ranking - Chaotic',
      'ranking.header': 'Player Ranking',
      'ranking.world': 'World',
      'ranking.all': 'All',
      'ranking.position': 'Position',
      'ranking.player': 'Player',
      'ranking.level': 'Level',
      'ranking.experience': 'Experience',
      'ranking.none': 'No players found.',
      'ranking.loadError': 'Failed to load ranking.',

      'title.support': 'Support - Chaotic',
      'support.header': 'Support',
      'support.intro': 'Need help? Send a support ticket.',
      'support.category': 'Category',
      'support.title': 'Title',
      'support.message': 'Message',
      'support.submit': 'Send',
      'support.loginRequired': 'You must be logged in to send a ticket.',
      'support.sendError': 'Failed to send ticket.',
      'support.sent': 'Ticket sent successfully.',
      'support.serverError': 'Could not connect to the server.',
      'support.cat.bug': 'Bug / Error',
      'support.cat.technical': 'Technical issue',
      'support.cat.account': 'Account / Login',
      'support.cat.report': 'Report',
      'support.cat.payment': 'Premium / Payment',
      'support.cat.other': 'Other',

      'title.forum': 'Forum - Chaotic',
      'forum.header': 'Forum',
      'forum.forum': 'Forum',
      'forum.board': 'Board',
      'forum.created': 'Created',
      'forum.loadingCategories': 'Loading categories...',
      'forum.noCategories': 'No categories found.',
      'forum.locked': 'Locked',
      'forum.loadingTopics': 'Loading topics...',
      'forum.thread': 'Thread',
      'forum.starter': 'Starter',
      'forum.replies': 'Replies',
      'forum.views': 'Views',
      'forum.last': 'Last Update',
      'forum.noneTopics': 'No topics yet.',
      'forum.createTopic': 'Create new topic',
      'forum.topicTitle': 'Title',
      'forum.topicMessage': 'Message',
      'forum.topicTitlePh': 'e.g., trade, question, suggestion...',
      'forum.topicMessagePh': 'Write the first message of the topic...',
      'forum.publish': 'Publish',
      'forum.loginToCreate': 'Sign in to create topics.',
      'forum.loadingTopic': 'Loading topic...',
      'forum.reply': 'Reply',
      'forum.loginToReply': 'Sign in to reply.',
      'forum.topicLocked': 'This topic is locked.',
      'forum.postReply': 'Post Reply',
      'forum.replyPh': 'Write your reply...',
      'forum.noPosts': 'No posts.',
      'forum.like': 'Like',
      'forum.edited': 'edited {date}',
      'forum.callError': 'Failed to call {action}',

      'title.community': 'Community - Chaotic',
      'community.header': 'Community',
      'community.intro': 'Join the Chaotic community! Find players, share experiences, organize events and stay up to date.',

      'title.library': 'Library - Chaotic',
      'library.header': 'Library',
      'library.intro': 'Quick world guide: quests, NPCs and houses (with coordinates) to help your journey.',
      'library.quests': 'Quests (starter)',
      'library.quest1': '<b>First steps</b>: create an account, sign in and open your panel.',
      'library.quest2': '<b>Economy</b>: find the <b>Vendor</b> NPC to buy basic items.',
      'library.quest3': '<b>Survival</b>: look for the <b>Nurse</b> to restore HP when needed.',
      'library.npcs': 'NPCs',
      'library.npcs.name': 'Name',
      'library.npcs.type': 'Type',
      'library.npcs.coords': 'Coordinates',
      'library.npcs.world': 'World',
      'library.houses': 'Houses (examples)',
      'library.houses.desc': 'Standard example houses (CidadeInicial). Door and rental area from map coordinates.',
      'library.houses.id': 'ID',
      'library.houses.city': 'City',
      'library.houses.door': 'Door',
      'library.houses.area': 'Area',
      'library.houses.floor': 'Floor',
      'library.houses.size': 'Size',
      'library.houses.rent': 'Rent',

      'title.info': 'Game Info - Chaotic',
      'info.header': 'Game Info',
      'info.intro': 'Here you can find project and world information for Chaotic (ChaosWar): systems, architecture and mechanics.',
      'info.video': 'Video',
      'info.videoFrameTitle': 'Chaotic - Video',
      'info.what': 'What is the game',
      'info.what.p1': 'Chaotic is a 2D multiplayer MMORPG inspired by Tibia/Pokémon-style experiences, focused on persistent world, progression and server-authoritative systems.',
      'info.what.p2': 'Architecture: the server validates everything; the client renders and sends intentions (movement/actions).',
      'info.arch': 'Architecture (client/server)',
      'info.arch.li1': '<b>Authoritative backend</b>: the server decides the final game state.',
      'info.arch.li2': '<b>WebSocket</b>: real-time channel for state and events.',
      'info.arch.li3': '<b>Client</b>: captures input, sends intentions and renders received state.',
      'info.arch.li4': '<b>Persistence</b>: data (accounts, players, inventory, NPCs/economy) is stored in the database.',
      'info.systems': 'Core systems',
      'info.systems.li1': '<b>Inventory</b>: slot grid, on-demand updates and server control.',
      'info.systems.li2': '<b>Economy</b>: gold coin, shop NPCs and nurse (starter base).',
      'info.systems.li3': '<b>Maps</b>: maps and collisions centralized on server; client only draws.',
      'info.systems.li4': '<b>Progression</b>: level/experience and modular evolution for multiple “universes”.',
    },

    pt: {
      'aria.openSidebar': 'Abrir menu lateral',
      'aria.goHome': 'Ir para Home',
      'aria.navigation': 'Navegação',

      'nav.login': 'Login',
      'nav.panel': 'Painel',
      'nav.logout': 'Logout',
      'nav.download': 'Download',
      'nav.gameInfo': 'Informações do Game',
      'nav.library': 'Library',
      'nav.community': 'Community',
      'nav.forum': 'Forum',
      'nav.support': 'Support',
      'nav.ranking': 'Ranking',
      'nav.language': 'Idioma',

      'footer.rights': 'Todos os direitos reservados.',

      'common.loading': 'Carregando...',
      'common.here': 'aqui',
      'common.createdOn': 'Criado em {date}',
      'common.by': 'por {name}',

      'title.home': 'Chaotic - Home',
      'home.kicker': 'MMORPG • Mundo persistente • Progressão e desafios',
      'home.subtitle': 'Entre no mundo de Chaotic e acompanhe as últimas notícias do servidor. Crie sua conta, faça login e prepare-se para a próxima aventura.',
      'home.createAccount': 'Criar conta',
      'home.signIn': 'Entrar',
      'home.news': 'Notícias',
      'home.news.date': 'Data',
      'home.news.title': 'Título',
      'home.news.content': 'Conteúdo',
      'home.news.loadError': 'Erro ao carregar notícias.',

      'title.login': 'Login - Chaotic',
      'login.header': 'Login',
      'login.username': 'Usuário',
      'login.password': 'Senha',
      'login.submit': 'Entrar',
      'login.createAccount': 'Criar Conta',
      'login.invalid': 'Usuário ou senha inválidos.',
      'login.serverError': 'Erro ao conectar ao servidor.',

      'title.register': 'Criar Conta - Chaotic',
      'register.header': 'Criar Conta',
      'register.username': 'Usuário',
      'register.password': 'Senha',
      'register.email': 'E-mail',
      'register.submit': 'Registrar',
      'register.error': 'Erro ao criar conta.',
      'register.serverError': 'Erro ao conectar ao servidor.',

      'title.player': 'Menu do Jogador - Chaotic',
      'player.header': 'Gerenciamento de Conta',
      'player.welcome': 'Bem-vindo à sua conta <b>{name}</b>!',
      'player.accountStatus': 'Status da Conta',
      'player.manageAccount': 'Gerenciar Conta',
      'player.logout': 'Logout',
      'player.downloadClient': 'Baixar Cliente',
      'player.downloadText': 'Clique {here} para baixar a versão mais recente do cliente Chaotic!',
      'player.characters': 'Personagens',
      'player.table.name': 'Nome',
      'player.table.voc': 'Voc/Nível/Mundo',
      'player.table.status': 'Status',
      'player.table.actions': 'Ações',
      'player.premium': 'Conta Premium',
      'player.free': 'Conta Free',
      'player.premiumBalance': 'Saldo de Premium Time: {days} dias',
      'player.row.vocLevelWorld': '{voc} - Nível {level} - Em {world}',
      'player.action.edit': 'Editar',
      'player.action.delete': 'Deletar',
      'player.noCharacters': 'Nenhum personagem encontrado.',
      'player.confirmDelete': 'Tem certeza que deseja deletar este personagem?',
      'player.deleteError': 'Erro ao deletar.',
      'player.renamePrompt': 'Novo nome do personagem:',
      'player.renameError': 'Erro ao renomear.',

      'title.ranking': 'Ranking - Chaotic',
      'ranking.header': 'Ranking dos Jogadores',
      'ranking.world': 'World',
      'ranking.all': 'Todos',
      'ranking.position': 'Posição',
      'ranking.player': 'Jogador',
      'ranking.level': 'Nível',
      'ranking.experience': 'Experiência',
      'ranking.none': 'Nenhum jogador encontrado.',
      'ranking.loadError': 'Erro ao carregar ranking.',

      'title.support': 'Support - Chaotic',
      'support.header': 'Support',
      'support.intro': 'Precisa de ajuda? Envie um ticket para o suporte.',
      'support.category': 'Categoria',
      'support.title': 'Título',
      'support.message': 'Mensagem',
      'support.submit': 'Enviar',
      'support.loginRequired': 'Você precisa estar logado para enviar um ticket.',
      'support.sendError': 'Erro ao enviar ticket.',
      'support.sent': 'Ticket enviado com sucesso.',
      'support.serverError': 'Erro ao conectar ao servidor.',
      'support.cat.bug': 'Bug / Erro',
      'support.cat.technical': 'Problema técnico',
      'support.cat.account': 'Conta / Login',
      'support.cat.report': 'Denúncia',
      'support.cat.payment': 'Premium / Pagamento',
      'support.cat.other': 'Outros',

      'title.forum': 'Forum - Chaotic',
      'forum.header': 'Forum',
      'forum.forum': 'Fórum',
      'forum.board': 'Board',
      'forum.created': 'Criado',
      'forum.loadingCategories': 'Carregando categorias...',
      'forum.noCategories': 'Nenhuma categoria encontrada.',
      'forum.locked': 'Trancado',
      'forum.loadingTopics': 'Carregando tópicos...',
      'forum.thread': 'Thread',
      'forum.starter': 'Starter',
      'forum.replies': 'Respostas',
      'forum.views': 'Views',
      'forum.last': 'Última',
      'forum.noneTopics': 'Nenhum tópico ainda.',
      'forum.createTopic': 'Criar novo tópico',
      'forum.topicTitle': 'Título',
      'forum.topicMessage': 'Mensagem',
      'forum.topicTitlePh': 'Ex.: trade, dúvida, sugestão...',
      'forum.topicMessagePh': 'Escreva a primeira mensagem do tópico...',
      'forum.publish': 'Publicar',
      'forum.loginToCreate': 'Faça login para criar tópicos.',
      'forum.loadingTopic': 'Carregando tópico...',
      'forum.reply': 'Responder',
      'forum.loginToReply': 'Faça login para responder.',
      'forum.topicLocked': 'Este tópico está trancado.',
      'forum.postReply': 'Post Reply',
      'forum.replyPh': 'Escreva sua resposta...',
      'forum.noPosts': 'Nenhum post.',
      'forum.like': 'Like',
      'forum.edited': 'editado {date}',
      'forum.callError': 'Erro ao chamar {action}',

      'title.community': 'Community - Chaotic',
      'community.header': 'Community',
      'community.intro': 'Participe da comunidade Chaotic! Encontre jogadores, compartilhe experiências, organize eventos e fique por dentro das novidades.',

      'title.library': 'Library - Chaotic',
      'library.header': 'Library',
      'library.intro': 'Guia rápido do mundo: quests, NPCs e houses (com coordenadas) para ajudar na sua jornada.',
      'library.quests': 'Quests (iniciais)',
      'library.quest1': '<b>Primeiros passos</b>: crie a conta, faça login e acesse seu painel.',
      'library.quest2': '<b>Economia</b>: encontre o NPC <b>Vendedor</b> para comprar itens básicos.',
      'library.quest3': '<b>Sobrevivência</b>: procure a <b>Enfermeira</b> para recuperar HP quando necessário.',
      'library.npcs': 'NPCs',
      'library.npcs.name': 'Nome',
      'library.npcs.type': 'Tipo',
      'library.npcs.coords': 'Coordenadas',
      'library.npcs.world': 'World',
      'library.houses': 'Houses (exemplos)',
      'library.houses.desc': 'Casas padrão de exemplo (CidadeInicial). Porta e área de aluguel em coordenadas do mapa.',
      'library.houses.id': 'ID',
      'library.houses.city': 'Cidade',
      'library.houses.door': 'Porta',
      'library.houses.area': 'Área',
      'library.houses.floor': 'Andar',
      'library.houses.size': 'Tamanho',
      'library.houses.rent': 'Aluguel',

      'title.info': 'Informações do Game - Chaotic',
      'info.header': 'Informações do Game',
      'info.intro': 'Aqui você encontra informações do projeto e do mundo de Chaotic (ChaosWar): sistemas, arquitetura e mecânicas.',
      'info.video': 'Vídeo',
      'info.videoFrameTitle': 'Chaotic - Vídeo',
      'info.what': 'O que é o jogo',
      'info.what.p1': 'Chaotic é um MMORPG 2D multiplayer inspirado em experiências estilo Tibia/Pokémon, com foco em mundo persistente, progressão e sistemas server-authoritative.',
      'info.what.p2': 'Arquitetura: o servidor valida tudo; o cliente renderiza e envia intenções (movimento/ações).',
      'info.arch': 'Arquitetura (cliente/servidor)',
      'info.arch.li1': '<b>Backend autoritativo</b>: o servidor decide estado final do jogo.',
      'info.arch.li2': '<b>WebSocket</b>: canal em tempo real para estado e eventos.',
      'info.arch.li3': '<b>Cliente</b>: captura input, envia intenções e renderiza o estado recebido.',
      'info.arch.li4': '<b>Persistência</b>: dados (contas, players, inventário, NPCs/economia) ficam no banco.',
      'info.systems': 'Sistemas principais',
      'info.systems.li1': '<b>Inventário</b>: grade de slots, atualização sob demanda e controle pelo servidor.',
      'info.systems.li2': '<b>Economia</b>: gold coin, NPCs de loja e curandeira (base inicial).',
      'info.systems.li3': '<b>Mapas</b>: mapas e colisões centralizados no servidor; client apenas desenha.',
      'info.systems.li4': '<b>Progressão</b>: level/experiência e evolução modular para múltiplos “universos”.',
    },

    es: {
      'aria.openSidebar': 'Abrir menú lateral',
      'aria.goHome': 'Ir al inicio',
      'aria.navigation': 'Navegación',

      'nav.login': 'Iniciar sesión',
      'nav.panel': 'Panel',
      'nav.logout': 'Cerrar sesión',
      'nav.download': 'Descargar',
      'nav.gameInfo': 'Información del juego',
      'nav.library': 'Biblioteca',
      'nav.community': 'Comunidad',
      'nav.forum': 'Foro',
      'nav.support': 'Soporte',
      'nav.ranking': 'Ranking',
      'nav.language': 'Idioma',

      'footer.rights': 'Todos los derechos reservados.',

      'common.loading': 'Cargando...',
      'common.here': 'aquí',
      'common.createdOn': 'Creado el {date}',
      'common.by': 'por {name}',

      'title.home': 'Chaotic - Inicio',
      'home.kicker': 'MMORPG • Mundo persistente • Progresión y desafíos',
      'home.subtitle': 'Entra al mundo de Chaotic y sigue las últimas noticias del servidor. Crea tu cuenta, inicia sesión y prepárate para la próxima aventura.',
      'home.createAccount': 'Crear cuenta',
      'home.signIn': 'Entrar',
      'home.news': 'Noticias',
      'home.news.date': 'Fecha',
      'home.news.title': 'Título',
      'home.news.content': 'Contenido',
      'home.news.loadError': 'Error al cargar noticias.',

      'title.login': 'Iniciar sesión - Chaotic',
      'login.header': 'Iniciar sesión',
      'login.username': 'Usuario',
      'login.password': 'Contraseña',
      'login.submit': 'Entrar',
      'login.createAccount': 'Crear cuenta',
      'login.invalid': 'Usuario o contraseña inválidos.',
      'login.serverError': 'Error al conectar con el servidor.',

      'title.register': 'Crear cuenta - Chaotic',
      'register.header': 'Crear cuenta',
      'register.username': 'Usuario',
      'register.password': 'Contraseña',
      'register.email': 'Correo',
      'register.submit': 'Registrar',
      'register.error': 'Error al crear la cuenta.',
      'register.serverError': 'Error al conectar con el servidor.',

      'title.player': 'Panel del jugador - Chaotic',
      'player.header': 'Gestión de cuenta',
      'player.welcome': '¡Bienvenido a tu cuenta {name}!',
      'player.accountStatus': 'Estado de la cuenta',
      'player.manageAccount': 'Gestionar cuenta',
      'player.logout': 'Cerrar sesión',
      'player.downloadClient': 'Descargar cliente',
      'player.downloadText': 'Haz clic {here} para descargar el último cliente de Chaotic.',
      'player.characters': 'Personajes',
      'player.table.name': 'Nombre',
      'player.table.voc': 'Voc/Nivel/Mundo',
      'player.table.status': 'Estado',
      'player.table.actions': 'Acciones',
      'player.premium': 'Cuenta Premium',
      'player.free': 'Cuenta Free',
      'player.premiumBalance': 'Saldo de Premium Time: {days} días',
      'player.row.vocLevelWorld': '{voc} - Nivel {level} - En {world}',
      'player.action.edit': 'Editar',
      'player.action.delete': 'Borrar',
      'player.noCharacters': 'No se encontraron personajes.',
      'player.confirmDelete': '¿Seguro que deseas borrar este personaje?',
      'player.deleteError': 'Error al borrar.',
      'player.renamePrompt': 'Nuevo nombre del personaje:',
      'player.renameError': 'Error al renombrar.',

      'title.ranking': 'Ranking - Chaotic',
      'ranking.header': 'Ranking de jugadores',
      'ranking.world': 'Mundo',
      'ranking.all': 'Todos',
      'ranking.position': 'Posición',
      'ranking.player': 'Jugador',
      'ranking.level': 'Nivel',
      'ranking.experience': 'Experiencia',
      'ranking.none': 'No se encontraron jugadores.',
      'ranking.loadError': 'Error al cargar el ranking.',

      'title.support': 'Soporte - Chaotic',
      'support.header': 'Soporte',
      'support.intro': '¿Necesitas ayuda? Envía un ticket de soporte.',
      'support.category': 'Categoría',
      'support.title': 'Título',
      'support.message': 'Mensaje',
      'support.submit': 'Enviar',
      'support.loginRequired': 'Debes iniciar sesión para enviar un ticket.',
      'support.sendError': 'Error al enviar el ticket.',
      'support.sent': 'Ticket enviado con éxito.',
      'support.serverError': 'Error al conectar con el servidor.',
      'support.cat.bug': 'Bug / Error',
      'support.cat.technical': 'Problema técnico',
      'support.cat.account': 'Cuenta / Login',
      'support.cat.report': 'Denuncia',
      'support.cat.payment': 'Premium / Pago',
      'support.cat.other': 'Otros',

      'title.forum': 'Foro - Chaotic',
      'forum.header': 'Foro',
      'forum.forum': 'Foro',
      'forum.board': 'Board',
      'forum.created': 'Creado',
      'forum.loadingCategories': 'Cargando categorías...',
      'forum.noCategories': 'No se encontraron categorías.',
      'forum.locked': 'Cerrado',
      'forum.loadingTopics': 'Cargando temas...',
      'forum.thread': 'Hilo',
      'forum.starter': 'Autor',
      'forum.replies': 'Respuestas',
      'forum.views': 'Vistas',
      'forum.last': 'Última',
      'forum.noneTopics': 'Aún no hay temas.',
      'forum.createTopic': 'Crear nuevo tema',
      'forum.topicTitle': 'Título',
      'forum.topicMessage': 'Mensaje',
      'forum.topicTitlePh': 'p. ej., trade, pregunta, sugerencia...',
      'forum.topicMessagePh': 'Escribe el primer mensaje del tema...',
      'forum.publish': 'Publicar',
      'forum.loginToCreate': 'Inicia sesión para crear temas.',
      'forum.loadingTopic': 'Cargando tema...',
      'forum.reply': 'Responder',
      'forum.loginToReply': 'Inicia sesión para responder.',
      'forum.topicLocked': 'Este tema está cerrado.',
      'forum.postReply': 'Responder',
      'forum.replyPh': 'Escribe tu respuesta...',
      'forum.noPosts': 'Sin publicaciones.',
      'forum.like': 'Me gusta',
      'forum.edited': 'editado {date}',
      'forum.callError': 'Error al llamar {action}',

      'title.community': 'Comunidad - Chaotic',
      'community.header': 'Comunidad',
      'community.intro': '¡Únete a la comunidad de Chaotic! Encuentra jugadores, comparte experiencias, organiza eventos y mantente al día.',

      'title.library': 'Biblioteca - Chaotic',
      'library.header': 'Biblioteca',
      'library.intro': 'Guía rápida del mundo: quests, NPCs y casas (con coordenadas) para ayudar en tu viaje.',
      'library.quests': 'Quests (iniciales)',
      'library.quest1': '<b>Primeros pasos</b>: crea la cuenta, inicia sesión y abre tu panel.',
      'library.quest2': '<b>Economía</b>: encuentra el NPC <b>Vendedor</b> para comprar ítems básicos.',
      'library.quest3': '<b>Supervivencia</b>: busca a la <b>Enfermera</b> para recuperar HP cuando lo necesites.',
      'library.npcs': 'NPCs',
      'library.npcs.name': 'Nombre',
      'library.npcs.type': 'Tipo',
      'library.npcs.coords': 'Coordenadas',
      'library.npcs.world': 'Mundo',
      'library.houses': 'Casas (ejemplos)',
      'library.houses.desc': 'Casas estándar de ejemplo (CidadeInicial). Puerta y área de alquiler por coordenadas del mapa.',
      'library.houses.id': 'ID',
      'library.houses.city': 'Ciudad',
      'library.houses.door': 'Puerta',
      'library.houses.area': 'Área',
      'library.houses.floor': 'Piso',
      'library.houses.size': 'Tamaño',
      'library.houses.rent': 'Alquiler',

      'title.info': 'Información del juego - Chaotic',
      'info.header': 'Información del juego',
      'info.intro': 'Aquí encontrarás información del proyecto y del mundo de Chaotic (ChaosWar): sistemas, arquitectura y mecánicas.',
      'info.video': 'Vídeo',
      'info.videoFrameTitle': 'Chaotic - Vídeo',
      'info.what': 'Qué es el juego',
      'info.what.p1': 'Chaotic es un MMORPG 2D multijugador inspirado en experiencias tipo Tibia/Pokémon, centrado en mundo persistente, progresión y sistemas server-authoritative.',
      'info.what.p2': 'Arquitectura: el servidor valida todo; el cliente renderiza y envía intenciones (movimiento/acciones).',
      'info.arch': 'Arquitectura (cliente/servidor)',
      'info.arch.li1': '<b>Backend autoritativo</b>: el servidor decide el estado final del juego.',
      'info.arch.li2': '<b>WebSocket</b>: canal en tiempo real para estado y eventos.',
      'info.arch.li3': '<b>Cliente</b>: captura input, envía intenciones y renderiza el estado recibido.',
      'info.arch.li4': '<b>Persistencia</b>: datos (cuentas, players, inventario, NPCs/economía) quedan en la base.',
      'info.systems': 'Sistemas principales',
      'info.systems.li1': '<b>Inventario</b>: grilla de slots, actualización bajo demanda y control del servidor.',
      'info.systems.li2': '<b>Economía</b>: gold coin, NPCs de tienda y enfermera (base inicial).',
      'info.systems.li3': '<b>Mapas</b>: mapas y colisiones centralizados en el servidor; el cliente sólo dibuja.',
      'info.systems.li4': '<b>Progresión</b>: nivel/experiencia y evolución modular para múltiples “universos”.',
    },

    it: {
      'aria.openSidebar': 'Apri menu laterale',
      'aria.goHome': 'Vai alla Home',
      'aria.navigation': 'Navigazione',

      'nav.login': 'Accedi',
      'nav.panel': 'Pannello',
      'nav.logout': 'Esci',
      'nav.download': 'Download',
      'nav.gameInfo': 'Info di gioco',
      'nav.library': 'Libreria',
      'nav.community': 'Community',
      'nav.forum': 'Forum',
      'nav.support': 'Supporto',
      'nav.ranking': 'Classifica',
      'nav.language': 'Lingua',

      'footer.rights': 'Tutti i diritti riservati.',

      'common.loading': 'Caricamento...',
      'common.here': 'qui',
      'common.createdOn': 'Creato il {date}',
      'common.by': 'da {name}',

      'title.home': 'Chaotic - Home',
      'home.kicker': 'MMORPG • Mondo persistente • Progressione e sfide',
      'home.subtitle': 'Entra nel mondo di Chaotic e segui le ultime notizie del server. Crea il tuo account, accedi e preparati per la prossima avventura.',
      'home.createAccount': 'Crea account',
      'home.signIn': 'Accedi',
      'home.news': 'Notizie',
      'home.news.date': 'Data',
      'home.news.title': 'Titolo',
      'home.news.content': 'Contenuto',
      'home.news.loadError': 'Errore nel caricamento delle notizie.',

      'title.login': 'Login - Chaotic',
      'login.header': 'Login',
      'login.username': 'Utente',
      'login.password': 'Password',
      'login.submit': 'Accedi',
      'login.createAccount': 'Crea account',
      'login.invalid': 'Utente o password non validi.',
      'login.serverError': 'Errore di connessione al server.',

      'title.register': 'Crea account - Chaotic',
      'register.header': 'Crea account',
      'register.username': 'Utente',
      'register.password': 'Password',
      'register.email': 'Email',
      'register.submit': 'Registrati',
      'register.error': 'Errore nella creazione dell\'account.',
      'register.serverError': 'Errore di connessione al server.',

      'title.player': 'Pannello giocatore - Chaotic',
      'player.header': 'Gestione account',
      'player.welcome': 'Benvenuto nel tuo account {name}!',
      'player.accountStatus': 'Stato account',
      'player.manageAccount': 'Gestisci account',
      'player.logout': 'Esci',
      'player.downloadClient': 'Scarica client',
      'player.downloadText': 'Clicca {here} per scaricare l\'ultimo client di Chaotic!',
      'player.characters': 'Personaggi',
      'player.table.name': 'Nome',
      'player.table.voc': 'Voc/Livello/Mondo',
      'player.table.status': 'Stato',
      'player.table.actions': 'Azioni',
      'player.premium': 'Account Premium',
      'player.free': 'Account Free',
      'player.premiumBalance': 'Saldo Premium Time: {days} giorni',
      'player.row.vocLevelWorld': '{voc} - Livello {level} - Su {world}',
      'player.action.edit': 'Modifica',
      'player.action.delete': 'Elimina',
      'player.noCharacters': 'Nessun personaggio trovato.',
      'player.confirmDelete': 'Sei sicuro di voler eliminare questo personaggio?',
      'player.deleteError': 'Errore durante l\'eliminazione.',
      'player.renamePrompt': 'Nuovo nome del personaggio:',
      'player.renameError': 'Errore durante la rinomina.',

      'title.ranking': 'Classifica - Chaotic',
      'ranking.header': 'Classifica giocatori',
      'ranking.world': 'Mondo',
      'ranking.all': 'Tutti',
      'ranking.position': 'Posizione',
      'ranking.player': 'Giocatore',
      'ranking.level': 'Livello',
      'ranking.experience': 'Esperienza',
      'ranking.none': 'Nessun giocatore trovato.',
      'ranking.loadError': 'Errore nel caricamento della classifica.',

      'title.support': 'Supporto - Chaotic',
      'support.header': 'Supporto',
      'support.intro': 'Hai bisogno di aiuto? Invia un ticket al supporto.',
      'support.category': 'Categoria',
      'support.title': 'Titolo',
      'support.message': 'Messaggio',
      'support.submit': 'Invia',
      'support.loginRequired': 'Devi essere loggato per inviare un ticket.',
      'support.sendError': 'Errore nell\'invio del ticket.',
      'support.sent': 'Ticket inviato con successo.',
      'support.serverError': 'Errore di connessione al server.',
      'support.cat.bug': 'Bug / Errore',
      'support.cat.technical': 'Problema tecnico',
      'support.cat.account': 'Account / Login',
      'support.cat.report': 'Segnalazione',
      'support.cat.payment': 'Premium / Pagamento',
      'support.cat.other': 'Altro',

      'title.forum': 'Forum - Chaotic',
      'forum.header': 'Forum',
      'forum.forum': 'Forum',
      'forum.board': 'Board',
      'forum.created': 'Creato',
      'forum.loadingCategories': 'Caricamento categorie...',
      'forum.noCategories': 'Nessuna categoria trovata.',
      'forum.locked': 'Chiuso',
      'forum.loadingTopics': 'Caricamento discussioni...',
      'forum.thread': 'Discussione',
      'forum.starter': 'Autore',
      'forum.replies': 'Risposte',
      'forum.views': 'Visite',
      'forum.last': 'Ultimo',
      'forum.noneTopics': 'Nessuna discussione.',
      'forum.createTopic': 'Crea nuova discussione',
      'forum.topicTitle': 'Titolo',
      'forum.topicMessage': 'Messaggio',
      'forum.topicTitlePh': 'es. trade, domanda, suggerimento...',
      'forum.topicMessagePh': 'Scrivi il primo messaggio della discussione...',
      'forum.publish': 'Pubblica',
      'forum.loginToCreate': 'Accedi per creare discussioni.',
      'forum.loadingTopic': 'Caricamento discussione...',
      'forum.reply': 'Rispondi',
      'forum.loginToReply': 'Accedi per rispondere.',
      'forum.topicLocked': 'Discussione chiusa.',
      'forum.postReply': 'Rispondi',
      'forum.replyPh': 'Scrivi la tua risposta...',
      'forum.noPosts': 'Nessun post.',
      'forum.like': 'Mi piace',
      'forum.edited': 'modificato {date}',
      'forum.callError': 'Errore chiamando {action}',

      'title.community': 'Community - Chaotic',
      'community.header': 'Community',
      'community.intro': 'Partecipa alla community di Chaotic! Trova giocatori, condividi esperienze, organizza eventi e resta aggiornato.',

      'title.library': 'Libreria - Chaotic',
      'library.header': 'Libreria',
      'library.intro': 'Guida rapida del mondo: quest, NPC e case (con coordinate) per aiutarti nel viaggio.',
      'library.quests': 'Quests (iniziali)',
      'library.quest1': '<b>Primi passi</b>: crea l\'account, accedi e apri il pannello.',
      'library.quest2': '<b>Economia</b>: trova l\'NPC <b>Venditore</b> per comprare oggetti base.',
      'library.quest3': '<b>Sopravvivenza</b>: cerca la <b>Infermiera</b> per recuperare HP quando serve.',
      'library.npcs': 'NPC',
      'library.npcs.name': 'Nome',
      'library.npcs.type': 'Tipo',
      'library.npcs.coords': 'Coordinate',
      'library.npcs.world': 'Mondo',
      'library.houses': 'Case (esempi)',
      'library.houses.desc': 'Case standard di esempio (CidadeInicial). Porta e area affitto dalle coordinate della mappa.',
      'library.houses.id': 'ID',
      'library.houses.city': 'Città',
      'library.houses.door': 'Porta',
      'library.houses.area': 'Area',
      'library.houses.floor': 'Piano',
      'library.houses.size': 'Dimensione',
      'library.houses.rent': 'Affitto',

      'title.info': 'Info di gioco - Chaotic',
      'info.header': 'Info di gioco',
      'info.intro': 'Qui trovi informazioni sul progetto e sul mondo di Chaotic (ChaosWar): sistemi, architettura e meccaniche.',
      'info.video': 'Video',
      'info.videoFrameTitle': 'Chaotic - Video',
      'info.what': 'Cos\'è il gioco',
      'info.what.p1': 'Chaotic è un MMORPG 2D multiplayer ispirato a esperienze tipo Tibia/Pokémon, focalizzato su mondo persistente, progressione e sistemi server-authoritative.',
      'info.what.p2': 'Architettura: il server valida tutto; il client renderizza e invia intenzioni (movimento/azioni).',
      'info.arch': 'Architettura (client/server)',
      'info.arch.li1': '<b>Backend autoritativo</b>: il server decide lo stato finale del gioco.',
      'info.arch.li2': '<b>WebSocket</b>: canale realtime per stato ed eventi.',
      'info.arch.li3': '<b>Client</b>: cattura input, invia intenzioni e renderizza lo stato ricevuto.',
      'info.arch.li4': '<b>Persistenza</b>: dati (account, player, inventario, NPC/economia) salvati nel database.',
      'info.systems': 'Sistemi principali',
      'info.systems.li1': '<b>Inventario</b>: griglia slot, update on-demand e controllo server.',
      'info.systems.li2': '<b>Economia</b>: gold coin, NPC shop e infermiera (base iniziale).',
      'info.systems.li3': '<b>Mappe</b>: mappe e collisioni centralizzate sul server; client disegna soltanto.',
      'info.systems.li4': '<b>Progressione</b>: livello/esperienza ed evoluzione modulare per più “universi”.',
    },

    zh: {
      'aria.openSidebar': '打开侧边栏菜单',
      'aria.goHome': '返回主页',
      'aria.navigation': '导航',

      'nav.login': '登录',
      'nav.panel': '面板',
      'nav.logout': '退出登录',
      'nav.download': '下载',
      'nav.gameInfo': '游戏信息',
      'nav.library': '资料库',
      'nav.community': '社区',
      'nav.forum': '论坛',
      'nav.support': '支持',
      'nav.ranking': '排行',
      'nav.language': '语言',

      'footer.rights': '版权所有。',

      'common.loading': '加载中...',
      'common.here': '这里',
      'common.createdOn': '创建于 {date}',
      'common.by': '由 {name}',

      'title.home': 'Chaotic - 主页',
      'home.kicker': 'MMORPG • 持久世界 • 成长与挑战',
      'home.subtitle': '进入 Chaotic 的世界，查看服务器最新消息。创建账号、登录并准备迎接下一次冒险。',
      'home.createAccount': '创建账号',
      'home.signIn': '登录',
      'home.news': '新闻',
      'home.news.date': '日期',
      'home.news.title': '标题',
      'home.news.content': '内容',
      'home.news.loadError': '加载新闻失败。',

      'title.login': '登录 - Chaotic',
      'login.header': '登录',
      'login.username': '用户名',
      'login.password': '密码',
      'login.submit': '登录',
      'login.createAccount': '创建账号',
      'login.invalid': '用户名或密码无效。',
      'login.serverError': '无法连接到服务器。',

      'title.register': '创建账号 - Chaotic',
      'register.header': '创建账号',
      'register.username': '用户名',
      'register.password': '密码',
      'register.email': '邮箱',
      'register.submit': '注册',
      'register.error': '创建账号失败。',
      'register.serverError': '无法连接到服务器。',

      'title.player': '玩家面板 - Chaotic',
      'player.header': '账号管理',
      'player.welcome': '欢迎来到你的账号 {name}！',
      'player.accountStatus': '账号状态',
      'player.manageAccount': '管理账号',
      'player.logout': '退出登录',
      'player.downloadClient': '下载客户端',
      'player.downloadText': '点击 {here} 下载最新的 Chaotic 客户端！',
      'player.characters': '角色',
      'player.table.name': '名称',
      'player.table.voc': '职业/等级/世界',
      'player.table.status': '状态',
      'player.table.actions': '操作',
      'player.premium': '会员账号',
      'player.free': '免费账号',
      'player.premiumBalance': '会员时间余额：{days} 天',
      'player.row.vocLevelWorld': '{voc} - 等级 {level} - 位于 {world}',
      'player.action.edit': '编辑',
      'player.action.delete': '删除',
      'player.noCharacters': '未找到角色。',
      'player.confirmDelete': '确定要删除该角色吗？',
      'player.deleteError': '删除失败。',
      'player.renamePrompt': '新的角色名：',
      'player.renameError': '重命名失败。',

      'title.ranking': '排行 - Chaotic',
      'ranking.header': '玩家排行',
      'ranking.world': '世界',
      'ranking.all': '全部',
      'ranking.position': '名次',
      'ranking.player': '玩家',
      'ranking.level': '等级',
      'ranking.experience': '经验',
      'ranking.none': '未找到玩家。',
      'ranking.loadError': '加载排行失败。',

      'title.support': '支持 - Chaotic',
      'support.header': '支持',
      'support.intro': '需要帮助？发送支持工单。',
      'support.category': '分类',
      'support.title': '标题',
      'support.message': '内容',
      'support.submit': '发送',
      'support.loginRequired': '你必须登录才能发送工单。',
      'support.sendError': '发送工单失败。',
      'support.sent': '工单发送成功。',
      'support.serverError': '无法连接到服务器。',
      'support.cat.bug': 'Bug / 错误',
      'support.cat.technical': '技术问题',
      'support.cat.account': '账号 / 登录',
      'support.cat.report': '举报',
      'support.cat.payment': '会员 / 支付',
      'support.cat.other': '其他',

      'title.forum': '论坛 - Chaotic',
      'forum.header': '论坛',
      'forum.forum': '论坛',
      'forum.board': '板块',
      'forum.created': '创建',
      'forum.loadingCategories': '正在加载板块...',
      'forum.noCategories': '未找到板块。',
      'forum.locked': '已锁定',
      'forum.loadingTopics': '正在加载主题...',
      'forum.thread': '主题',
      'forum.starter': '发帖人',
      'forum.replies': '回复',
      'forum.views': '浏览',
      'forum.last': '最后更新',
      'forum.noneTopics': '暂无主题。',
      'forum.createTopic': '创建新主题',
      'forum.topicTitle': '标题',
      'forum.topicMessage': '内容',
      'forum.topicTitlePh': '例如：交易、问题、建议...',
      'forum.topicMessagePh': '写下主题的第一条内容...',
      'forum.publish': '发布',
      'forum.loginToCreate': '登录后才能发帖。',
      'forum.loadingTopic': '正在加载主题...',
      'forum.reply': '回复',
      'forum.loginToReply': '登录后才能回复。',
      'forum.topicLocked': '该主题已锁定。',
      'forum.postReply': '回复',
      'forum.replyPh': '写下你的回复...',
      'forum.noPosts': '暂无帖子。',
      'forum.like': '点赞',
      'forum.edited': '编辑于 {date}',
      'forum.callError': '调用失败：{action}',

      'title.community': '社区 - Chaotic',
      'community.header': '社区',
      'community.intro': '加入 Chaotic 社区！寻找玩家、分享经验、组织活动并获取最新消息。',

      'title.library': '资料库 - Chaotic',
      'library.header': '资料库',
      'library.intro': '世界快速指南：任务、NPC 与房屋（含坐标）帮助你的旅程。',
      'library.quests': '任务（新手）',
      'library.quest1': '<b>第一步</b>：创建账号、登录并打开面板。',
      'library.quest2': '<b>经济</b>：找到 <b>Vendor</b> NPC 购买基础物品。',
      'library.quest3': '<b>生存</b>：寻找 <b>Nurse</b> 来恢复生命值。',
      'library.npcs': 'NPC',
      'library.npcs.name': '名称',
      'library.npcs.type': '类型',
      'library.npcs.coords': '坐标',
      'library.npcs.world': '世界',
      'library.houses': '房屋（示例）',
      'library.houses.desc': '示例标准房屋（CidadeInicial）。门与租赁区域来自地图坐标。',
      'library.houses.id': 'ID',
      'library.houses.city': '城市',
      'library.houses.door': '门',
      'library.houses.area': '区域',
      'library.houses.floor': '楼层',
      'library.houses.size': '大小',
      'library.houses.rent': '租金',

      'title.info': '游戏信息 - Chaotic',
      'info.header': '游戏信息',
      'info.intro': '这里包含 Chaotic（ChaosWar）项目与世界的信息：系统、架构与机制。',
      'info.video': '视频',
      'info.videoFrameTitle': 'Chaotic - 视频',
      'info.what': '游戏是什么',
      'info.what.p1': 'Chaotic 是一款 2D 多人 MMORPG，灵感来自 Tibia/Pokémon 风格体验，聚焦持久世界、成长与服务器权威系统。',
      'info.what.p2': '架构：服务器验证一切；客户端渲染并发送意图（移动/动作）。',
      'info.arch': '架构（客户端/服务器）',
      'info.arch.li1': '<b>权威后端</b>：服务器决定最终游戏状态。',
      'info.arch.li2': '<b>WebSocket</b>：用于状态与事件的实时通道。',
      'info.arch.li3': '<b>客户端</b>：捕获输入、发送意图并渲染接收的状态。',
      'info.arch.li4': '<b>持久化</b>：数据（账号、角色、背包、NPC/经济）存储在数据库。',
      'info.systems': '核心系统',
      'info.systems.li1': '<b>背包</b>：格子槽位、按需更新与服务器控制。',
      'info.systems.li2': '<b>经济</b>：金币、商店 NPC 与护士（基础）。',
      'info.systems.li3': '<b>地图</b>：地图与碰撞在服务器集中；客户端只负责绘制。',
      'info.systems.li4': '<b>成长</b>：等级/经验与可扩展的多“宇宙”。',
    },
  };

  function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
    return null;
  }

  function setCookie(name, value, maxAgeSeconds) {
    const maxAge = typeof maxAgeSeconds === 'number' ? `; max-age=${maxAgeSeconds}` : '';
    document.cookie = `${name}=${encodeURIComponent(String(value))}; path=/${maxAge}; samesite=lax`;
  }

  function normalizeLang(lang) {
    const v = String(lang || '').toLowerCase();
    if (SUPPORTED.includes(v)) return v;
    return 'en';
  }

  function getLang() {
    const fromUrl = new URLSearchParams(window.location.search).get('lang');
    if (fromUrl) return normalizeLang(fromUrl);
    const fromCookie = getCookie('lang');
    if (fromCookie) return normalizeLang(fromCookie);
    return 'en';
  }

  function format(template, vars) {
    if (!vars) return template;
    return String(template).replace(/\{(\w+)\}/g, (_, key) => {
      const v = vars[key];
      return v === undefined || v === null ? '' : String(v);
    });
  }

  function t(key, vars) {
    const lang = getLang();
    const table = translations[lang] || translations.en;
    const fallback = translations.en || {};
    const raw = table[key] ?? fallback[key] ?? key;
    return format(raw, vars);
  }

  function locale() {
    const lang = getLang();
    if (lang === 'en') return 'en-US';
    if (lang === 'es') return 'es-ES';
    if (lang === 'pt') return 'pt-BR';
    if (lang === 'zh') return 'zh-CN';
    if (lang === 'it') return 'it-IT';
    return 'en-US';
  }

  function apply(root = document) {
    const lang = getLang();
    document.documentElement.lang = lang;

    root.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = el.getAttribute('data-i18n');
      if (!key) return;
      el.textContent = t(key);
    });

    root.querySelectorAll('[data-i18n-html]').forEach((el) => {
      const key = el.getAttribute('data-i18n-html');
      if (!key) return;
      el.innerHTML = t(key);
    });

    root.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
      const key = el.getAttribute('data-i18n-placeholder');
      if (!key) return;
      el.setAttribute('placeholder', t(key));
    });

    root.querySelectorAll('[data-i18n-title]').forEach((el) => {
      const key = el.getAttribute('data-i18n-title');
      if (!key) return;
      el.setAttribute('title', t(key));
    });

    root.querySelectorAll('[data-i18n-aria]').forEach((el) => {
      const key = el.getAttribute('data-i18n-aria');
      if (!key) return;
      el.setAttribute('aria-label', t(key));
    });

    const titleEl = document.querySelector('title[data-i18n]');
    if (titleEl) {
      const key = titleEl.getAttribute('data-i18n');
      if (key) titleEl.textContent = t(key);
    }

    const langSelect = document.getElementById('langSelect');
    if (langSelect) {
      langSelect.value = lang;
    }
  }

  function setLang(lang) {
    const next = normalizeLang(lang);
    setCookie('lang', next, 60 * 60 * 24 * 30);
  }

  window.I18N = {
    getLang,
    setLang,
    t,
    apply,
    locale,
  };

  // Apply once the DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => apply());
  } else {
    apply();
  }
})();

ESPECIFICA√á√ÉO PARA IA
Jogo 2D Estilo PokexGames (Baseado em Tibia)
Objetivo

Criar um MMORPG 2D em tiles, inspirado em PokexGames e Tibia, utilizando arquitetura client‚Äìserver, com WebSocket, backend autoritativo, vis√£o limitada por viewport e suporte escal√°vel para milhares de jogadores simult√¢neos.

1. Arquitetura Geral (OBRIGAT√ìRIA)

O sistema √© dividido em tr√™s camadas:

Client (Frontend)
Apenas renderiza o jogo e envia inten√ß√µes do jogador.

Server (Backend)
Controla totalmente o estado do jogo (autoritativo).

Shared
Contratos, enums e formatos de mensagens compartilhados.

‚ùå O cliente NUNCA decide:

Colis√£o

Posi√ß√£o final

Spawn de Pok√©mon

Vis√£o do mundo

2. Conceito Fundamental (MUITO IMPORTANTE)
Renderiza√ß√£o ‚â† L√≥gica do jogo

O cliente renderiza em FPS (ex: 60 FPS)

O servidor processa l√≥gica em ticks (ex: 10‚Äì20 TPS)

O jogo N√ÉO funciona como FPS

üëâ Nunca enviar posi√ß√£o por frame.

3. Movimento (Modelo Tibia)
Movimento √© DISCRETO (por tile), n√£o cont√≠nuo

O cliente envia apenas a inten√ß√£o:

{
  "action": "MOVE",
  "direction": "UP"
}


O servidor:

Verifica cooldown

Verifica colis√£o

Atualiza posi√ß√£o

Atualiza vis√£o

Envia atualiza√ß√£o ao cliente

O cliente:

Apenas anima o sprite

Atualiza a c√¢mera

Renderiza o novo estado

‚ùå O cliente nunca envia coordenadas
‚ùå N√£o existe envio por frame

4. Vis√£o Limitada (Viewport)
Como Tibia / PokexGames funciona

Cada jogador possui uma √°rea de vis√£o fixa:

Exemplo:

Raio: 15 tiles

Viewport: 31x31 tiles

O servidor:

Calcula a vis√£o baseada na posi√ß√£o do jogador

Envia apenas:

Tiles vis√≠veis

Entidades dentro da vis√£o

Eventos relevantes

O cliente nunca recebe o mapa inteiro.

üëâ A vis√£o √© recalculada apenas por evento, nunca por frame.

5. Mundo do Jogo
Estrutura

Mundo dividido em:

Zonas

Mapas

N√≠veis Z

Cada mapa √© um grid de tiles

Cada tile pode ter:

Tipo de terreno

Colis√£o

M√∫ltiplas entidades empilhadas

6. Entidades

Todas as entidades herdam de uma classe base Entity.

Tipos principais:

Player

Pok√©mon selvagem

Pok√©mon do jogador

NPC

Item

Cada entidade possui:

ID √∫nico

Posi√ß√£o (x, y, z)

Sprite ID

Estado atual

7. Sistema de Pok√©mon (Estilo PokexGames)
Pok√©mon Selvagem

Existe apenas no servidor

Spawn controlado por zona

Baseado em tipo de terreno

N√£o persistido no banco

Pok√©mon do Jogador

Persistido no banco

S√≥ vira entidade vis√≠vel quando necess√°rio

Controlado exclusivamente pelo servidor

‚ùå Cliente nunca cria Pok√©mon

8. Game Loop do Servidor

O servidor roda um loop fixo:

Tick rate: 10‚Äì20 ticks por segundo

Em cada tick:

Processa inputs recebidos

Atualiza entidades

Resolve colis√µes

Atualiza vis√£o

Envia apenas deltas, n√£o snapshots completos

9. Comunica√ß√£o WebSocket
Comunica√ß√£o baseada em eventos

Exemplos:

MOVE

CHAT

ENTITY_SPAWN

ENTITY_DESPAWN

WORLD_UPDATE

BATTLE_START

As mensagens:

S√£o pequenas

Direcionadas apenas aos jogadores relevantes (por vis√£o)

10. Escalabilidade (Requisito Cr√≠tico)

O sistema deve:

Usar vis√£o limitada

Evitar broadcast global

Indexar entidades por grid

Carregar mapas sob demanda

Separar zonas logicamente

Objetivo:

Suportar milhares de jogadores simult√¢neos

Sem flood de mensagens

Sem l√≥gica no cliente

11. Persist√™ncia

Persistir no banco:

Conta

Player

Pok√©mon

Invent√°rio

√öltima posi√ß√£o salva

N√£o persistir:

Pok√©mon selvagem

Estado moment√¢neo do mundo

12. Regras de Ouro (N√ÉO QUEBRAR)

Cliente renderiza, servidor manda

Movimento √© por tile

Vis√£o √© limitada

Comunica√ß√£o √© por evento

Nunca sincronizar por frame

Nunca confiar no cliente

13. Frase-chave de contexto (IMPORTANTE)

‚ÄúEste projeto implementa um MMORPG 2D em tiles, inspirado em Tibia e PokexGames, com servidor autoritativo, comunica√ß√£o via WebSocket, vis√£o limitada por viewport, movimenta√ß√£o discreta por tile, renderiza√ß√£o em FPS no cliente e l√≥gica baseada em ticks no backend.‚Äù

14. Resultado Esperado

O jogo deve:

Funcionar como PokexGames

Ter movimenta√ß√£o estilo Tibia

Ser escal√°vel

Ter c√≥digo modular

Ter separa√ß√£o clara entre client e server